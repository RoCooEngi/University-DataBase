{% extends 'base.html' %}
{% block content %}
{% if student %}
    Редактировать студента: {{ student.name }}

    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}

    <form action="{{ url_for('edit_student', group_id=group_id, student_id=student.id) }}" method="POST">
        <input type="hidden" name="program_id" value="{{ program_id if program_id else '' }}">
        
        <label>ID (номер зачетки): </label><input type="text" name="student_id" value="{{ student.id }}" required><br><br>
        
        <label>Имя: </label><input type="text" name="name" value="{{ student.name if student.name else '' }}" required><br><br>
        
        <label>Стипендия: </label><input type="number" step="0.01" name="scholarship" value="{{ '%0.2f' % student.scholarship if student.scholarship is not none else '0.00' }}" min="0" required><br><br>
        
        <h3>Оценки по предметам</h3>
        {% if grades %}
            <table border="1">
                <tr>
                    <th>Предмет</th>
                    <th>Оценка (0-5)</th>
                </tr>
                {% for grade in grades %}
                    <tr>
                        <td>{{ grade.name if grade.name else 'Без названия' }}</td>

                        <td><input type="number" step="0.1" name="grade_{{ grade.subject_id if grade.subject_id else '' }}" value="{{ '%0.1f' % grade.grade if grade.grade is not none else '' }}" min="0" max="5"></td>

                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <p>Нет доступных предметов для отображения.</p>
        {% endif %}
        
        <br>
        <button type="submit">Сохранить</button>
    </form>

    <a href="{{ url_for('group', program_id=program_id, group_id=group_id) }}">Назад к группе</a>
{% else %}
    <p>Студент не найден.</p>
{% endif %}
{% endblock %}